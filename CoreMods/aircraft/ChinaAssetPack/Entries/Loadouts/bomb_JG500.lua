

local jg500_name = 'JG-500'
local jg500_mass = 564.0
local pylon_mass = 0.0

local jg500_warhead =
{
    mass                 = 450.0,
    expl_mass            = 450.0,
    piercing_mass        = 0.0,
    other_factors        = { 0.5, 0.5, 1.0 },
    concrete_factors     = { 5.0, 1.0, 5.0 },
    concrete_obj_factor  = 10.0,
    obj_factors          = { 1.0, 1.0, 1.0 },
    cumulative_factor    = 0.0,
    cumulative_thickness = 0.0
}

JG500 = {
    category       = CAT_BOMBS,
    name           = jg500_name,
    user_name      = _(jg500_name),
    wsTypeOfWeapon = {4, 5, 36, WSTYPE_PLACEHOLDER},

    model          = "kab-500",
    scheme         = "bomb-paveway-II-afm",
    --class_name     = 'wAmmunition',
	class_name		= "wAmmunitionLaserHoming",

    shape_table_data = {
        {
            name     = jg500_name,
            file     = 'kab-500',
            life     = 1,
            fire     = { 0, 1},
            username = jg500_name,
            index    = WSTYPE_PLACEHOLDER,
        },
    },

    -- bomb data
    type        = 4,
    mass        = jg500_mass,
    hMin        = 1000.0,
    hMax        = 40000.0,
    Cx          = 0.00133,
    VyHold      = -60.0,
    Ag          = -1.0,
    warhead     = jg500_warhead,
   -- sounderName = 'Weapons/BetAB_500ShP',

    -- scheme data
    fm = {
		
			A = 0.36,
			I = 387.60416666667,
			L = 3.05,
			Ma = 0.53209076385094,
			Ma_x = 0.1,
			Mw = 4.1007009675697,
			Mw_x = 1,
			Sw = 2.2,
			caliber = 0.35,
			cx_coeff = { 1, 0.39, 0.6, 0.168, 1.31 },
			dCydA = { 0.022031224307594, 0.036 },
			finsTau = 0.1,
			mass = jg500_mass,
			maxAoa = 0.1221730476396,
			wind_sigma = 0,
			wind_time = 1000
    },

	bang_bang_autopilot = 
	{
		omegaDumpingK = 0.8
	},
		arming_delay = {
			delay_time = 0.8,
			enabled = true
		},
		arming_vane = {
			enabled = false,
			velK = 1
		},
	targeting_data = {
		char_time = 20.28
	},
	
	LaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 3425, 8450, 13875, 17725, 19400, 22250, 200, 0, 0, 4050, 9100, 14400, 18150, 20550, 22800, 400, 0, 0, 4775, 10000, 15675, 19375, 21750, 23900, 700, 0, 0, 6025, 11225, 17075, 20850, 23150, 25325, 1000, 0, 0, 7250, 12800, 18450, 22200, 24500, 26650, 2000, 2500, 7400, 11550, 17200, 23050, 26550, 29050, 31350, 3000, 4700, 11700, 15600, 21800, 27800, 31300, 33800, 36200, 4000, 6000, 15800, 19500, 26200, 32400, 35900, 38700, 41100, 5000, 7100, 17200, 23600, 30300, 37000, 40400, 43400, 45800, 6000, 8100, 17500, 27900, 34200, 41300, 44900, 48000, 50600, 7000, 8750, 17500, 32250, 38000, 45500, 49250, 52500, 55250, 8000, 9500, 17750, 37000, 41500, 49000, 53500, 57000, 60000, 9000, 17500, 18000, 41750, 45500, 52250, 57500, 61250, 64500, 10000, 10750, 18250, 44750, 49750, 55250, 60750, 65250, 69250, 11000, 11000, 18000, 40500, 54000, 57000, 63500, 69000, 74000, 12000, 11500, 18500, 35500, 57500, 61000, 66500, 73000, 78000, 13000, 11000, 18000, 31000, 61000, 64000, 69000, 76000, 81000, 14000, 11000, 18000, 30000, 59000, 67000, 72000, 79000, 83000, 15000, 12000, 18000, 28000, 49000, 71000, 75000, 80000, 85000 },
	MinLaunchDistData = { 19, 8, 100, 150, 200, 250, 300, 350, 400, 450, 100, 0, 0, 1450, 650, 675, 1650, 1750, 2100, 200, 0, 0, 2150, 1050, 925, 1175, 1000, 1500, 400, 0, 0, 1800, 1825, 1825, 1825, 1825, 1825, 700, 0, 0, 2750, 3125, 3175, 3175, 3175, 3175, 1000, 0, 0, 3400, 4050, 4450, 4550, 4550, 4550, 2000, 2150, 3550, 4800, 6000, 6950, 7800, 8400, 8850, 3000, 2600, 4200, 5800, 7300, 8600, 9800, 10800, 11700, 4000, 2800, 4500, 6500, 8300, 9800, 11200, 12500, 13800, 5000, 3000, 5000, 7100, 9100, 10800, 12400, 13900, 15500, 6000, 3200, 5300, 7500, 9700, 11700, 13400, 15100, 17000, 7000, 3500, 5750, 7750, 10250, 12500, 14500, 16250, 18500, 8000, 3500, 6000, 8250, 10750, 13000, 15250, 17250, 19750, 9000, 3500, 6250, 8750, 11250, 13750, 16000, 18250, 20750, 10000, 3750, 6250, 9000, 11750, 14250, 16500, 19000, 22000, 11000, 4000, 6500, 9500, 12000, 15000, 17500, 20000, 23000, 12000, 4000, 7000, 9500, 12500, 15500, 18000, 21000, 24000, 13000, 4000, 7000, 10000, 13000, 16000, 19000, 22000, 25000, 14000, 4000, 7000, 10000, 13000, 16000, 19000, 23000, 26000, 15000, 4000, 7000, 11000, 14000, 17000, 20000, 24000, 27000 },


}
declare_weapon(JG500)



local JG500B_name = 'JG-500B'
local JG500B_mass = 564.0
local pylon_mass = 0.0

local JG500B_warhead =
{
    mass                 = 450.0,
    expl_mass            = 450.0,
    piercing_mass        = 0.0,
    other_factors        = { 0.5, 0.5, 1.0 },
    concrete_factors     = { 5.0, 1.0, 5.0 },
    concrete_obj_factor  = 10.0,
    obj_factors          = { 1.0, 1.0, 1.0 },
    cumulative_factor    = 0.0,
    cumulative_thickness = 0.0
}

JG500B = {
    category       = CAT_BOMBS,
    name           = JG500B_name,
    user_name      = _(JG500B_name),
    wsTypeOfWeapon = {4, 5, 36, WSTYPE_PLACEHOLDER},

    model          = "kab-500",
    scheme         = "bomb-paveway-III",
    --class_name     = 'wAmmunition',
	class_name		= "wAmmunitionLaserHoming",

    shape_table_data = {
        {
            name     = JG500B_name,
            file     = 'kab-500',
            life     = 1,
            fire     = { 0, 1},
            username = JG500B_name,
            index    = WSTYPE_PLACEHOLDER,
        },
    },

    -- bomb data
    type        = 4,
    mass        = JG500B_mass,
    hMin        = 1000.0,
    hMax        = 40000.0,
    Cx          = 0.00133,
    VyHold      = -60.0,
    Ag          = -1.0,
    warhead     = JG500B_warhead,
   -- sounderName = 'Weapons/BetAB_500ShP',

    -- scheme data
    fm = {
		
			A = 0.36,
			I = 387.60416666667,
			L = 3.05,
			Ma = 0.53209076385094,
			Ma_x = 0.1,
			Mw = 4.1007009675697,
			Mw_x = 1,
			Sw = 2.2,
			caliber = 0.35,
			cx_coeff = { 1, 0.39, 0.6, 0.168, 1.31 },
			dCydA = { 0.022031224307594, 0.036 },
			finsTau = 0.1,
			mass = JG500B_mass,
			maxAoa = 0.1221730476396,
			wind_sigma = 0,
			wind_time = 1000
    },
		autopilot = {
			K = 5,
			Kd = 0,
			Ki = 0,
			Kix = 0,
			Ks = 4,
			Kw = 1,
			Kx = 0,
			PN_dist_data = { 2000, 1, 500, 1 },
			add_err_val = 0.02,
			conv_input = 0,
			delay = 1,
			fins_limit = 0.43633231299858,
			rotated_WLOS_input = 0,
			w_limit = 0.087266462599716
		},
		arming_delay = {
			delay_time = 0.8,
			enabled = true
		},
		arming_vane = {
			enabled = false,
			velK = 1
		},
		seeker = {
			FOV = 0.5235987755983,
			delay = 0
		},
	targeting_data = {
		char_time = 20.33
	},
	LaunchDistData = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 0, 2225, 2800, 3300, 5800, 6975, 7900, 8750, 9725, 10800, 2000, 2100, 3075, 4000, 5600, 7900, 9000, 9875, 10675, 11650, 12775, 3000, 2650, 3950, 5450, 7700, 10000, 11000, 11800, 12650, 13600, 14750, 4000, 3450, 5050, 7000, 9550, 12100, 13150, 13850, 14700, 16000, 17300, 5000, 4200, 6100, 8500, 11300, 13700, 15600, 16600, 17600, 18700, 19900, 6000, 5000, 7250, 10000, 12750, 15500, 17500, 18500, 19500, 20500, 21750, 7000, 6000, 8500, 11250, 14500, 17000, 18250, 19500, 20750, 22000, 23500, 8000, 6750, 9500, 12750, 16000, 17750, 19000, 20250, 21750, 23250, 25000, 9000, 7500, 10750, 14500, 16750, 18250, 19750, 21000, 22500, 24500, 26250, 10000, 8500, 11750, 15000, 17250, 19000, 20500, 21750, 23500, 25750, 27750, 11000, 9500, 13000, 15500, 17500, 19000, 20500, 22000, 24000, 26000, 28500, 12000, 10500, 13500, 15500, 17500, 19500, 21000, 23000, 25000, 27000, 29500, 13000, 10500, 13500, 16000, 18000, 20000, 21500, 23500, 25500, 28000, 30500, 14000, 10500, 13500, 16000, 18500, 20000, 22000, 24000, 26500, 29000, 31500, 15000, 10500, 13500, 16500, 18500, 20500, 22500, 25000, 27500, 30000, 32500 },
	MaxTOF = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 0, 15.4, 14.9, 14.5, 23.3, 26.2, 28.1, 29.7, 31.3, 32.9, 2000, 21.5, 21.7, 21.7, 25.1, 32.6, 34.8, 36.4, 37.5, 38.7, 40.1, 3000, 26.6, 27.3, 28.9, 34.5, 41.9, 43.4, 44.4, 45.4, 46.1, 47.2, 4000, 31.9, 33.2, 36.1, 42.7, 50.9, 52.6, 52.9, 53.6, 55.3, 56.4, 5000, 36.5, 38.5, 42.8, 50.1, 57.3, 62.8, 63.9, 64.7, 65.2, 65.3, 6000, 41, 43.9, 49.3, 56.1, 64.4, 69.4, 70.3, 70.8, 70.4, 70.3, 7000, 45.8, 49.5, 54.6, 63.3, 69.5, 71, 72.9, 74.3, 74.6, 75.2, 8000, 49.8, 54, 60.9, 68.8, 71.6, 73.1, 74.7, 76.8, 77.5, 78.7, 9000, 53.7, 59.4, 67.9, 71.3, 73, 75.4, 76.6, 77.9, 80.4, 80.6, 10000, 58.3, 63.8, 69.7, 73.2, 75.8, 77.8, 78.5, 80.2, 83, 83.6, 11000, 62.9, 68.8, 71.9, 74.3, 75.4, 76.9, 78.1, 79.9, 80.3, 82.4, 12000, 67.3, 71.3, 72.4, 74.4, 77.1, 78.2, 80.9, 81.7, 81, 82.3, 13000, 68.4, 72.3, 74.9, 76.5, 78.8, 79.4, 81.4, 80.9, 81.6, 82.2, 14000, 69.9, 73.3, 75.6, 78.6, 78.5, 80.5, 81.6, 82, 82, 82, 15000, 71.4, 74.4, 78, 78.8, 80.1, 81.4, 83.5, 82.9, 82.3, 81.8 },
	MidTOF = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 15.3, 15.3, 14.7, 14.2, 18.4, 19.5, 20, 20.1, 20.3, 20.7, 2000, 21.3, 21.4, 21.4, 23, 26.8, 28, 28.9, 29.4, 29.8, 29.7, 3000, 26.2, 26.6, 27.5, 30.2, 33.9, 34.9, 35.5, 36.3, 36.7, 37.2, 4000, 30.6, 31.4, 33, 36.4, 40.4, 41.5, 41.9, 42.4, 43.6, 44.4, 5000, 34.6, 35.9, 38.1, 41.6, 45.4, 48.3, 49.3, 50, 50.8, 51, 6000, 38.3, 39.9, 42.8, 46.3, 50.6, 53.6, 54.8, 55.6, 55.3, 55.3, 7000, 42.2, 43.9, 46.9, 51.1, 54.6, 56.3, 57.7, 59.1, 59.2, 59.1, 8000, 45.3, 47.8, 51.4, 55.4, 57.7, 59.1, 60.1, 61.4, 61.9, 62.1, 9000, 48.9, 51.6, 55.7, 58.2, 59.8, 61.4, 62.5, 63.6, 64.3, 64.3, 10000, 52.2, 54.9, 58.5, 60.7, 62.9, 64.1, 64.8, 65.6, 66.8, 66.6, 11000, 55.1, 58.2, 60.9, 62.1, 63.1, 64.5, 65.5, 66.6, 66.7, 67.9, 12000, 58.2, 61.1, 62.2, 63.8, 65.3, 66.9, 68.2, 68.5, 67.9, 68.5, 13000, 60.7, 62.8, 64.9, 66.2, 67.3, 68.6, 69.2, 69.3, 68.8, 69, 14000, 62.7, 64.6, 66.2, 68.4, 68.6, 69.9, 70.6, 70.6, 70.3, 69.4, 15000, 64.7, 66.2, 68.6, 69.4, 70.3, 71.2, 72.4, 71.6, 71, 70.5 },
	MinLaunchDistData = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 0, 2175, 2725, 3175, 3650, 3950, 4100, 4200, 4350, 4750, 2000, 1975, 2925, 3825, 4650, 5400, 6000, 6525, 7000, 7550, 7850, 3000, 2300, 3500, 4700, 5750, 6650, 7350, 7950, 8600, 9300, 10150, 4000, 2600, 4000, 5400, 6650, 7650, 8450, 9150, 9850, 10750, 11750, 5000, 2800, 4500, 6000, 7300, 8500, 9400, 10200, 11000, 12100, 13200, 6000, 3000, 4750, 6500, 8000, 9250, 10250, 11250, 12250, 13250, 14500, 7000, 3250, 5000, 7000, 8500, 9750, 11000, 12000, 13250, 14500, 15750, 8000, 3250, 5500, 7500, 9000, 10500, 11750, 12750, 14000, 15500, 17000, 9000, 3750, 5750, 7750, 9500, 11000, 12250, 13500, 15000, 16500, 18250, 10000, 3750, 6000, 8250, 10000, 11750, 13000, 14250, 15750, 17750, 19500, 11000, 3500, 6000, 8500, 10000, 11500, 13000, 14500, 16500, 18500, 21000, 12000, 3500, 6500, 8500, 10500, 12000, 14000, 15500, 17500, 19500, 22000, 13000, 4000, 6500, 9000, 11000, 12500, 14500, 16000, 18500, 20500, 23000, 14000, 4000, 6500, 9000, 11500, 13000, 15000, 17000, 19500, 22000, 24000, 15000, 4000, 6500, 9500, 11500, 13500, 15500, 18000, 20500, 23000, 25500 },
	MinTOF = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 0, 15.2, 14.6, 14, 14, 13.6, 12.9, 12.1, 11.3, 11.1, 2000, 21.2, 21.2, 21.1, 21.2, 21.6, 21.9, 22.2, 22.2, 22.1, 20.8, 3000, 25.9, 26, 26.3, 26.7, 27.3, 27.7, 28, 28.3, 28.4, 28.6, 4000, 29.9, 30.2, 30.6, 31.3, 32, 32.5, 32.9, 33.2, 33.6, 33.9, 5000, 33.6, 34, 34.5, 35.1, 36.1, 36.8, 37.3, 37.6, 38.3, 38.5, 6000, 37, 37.4, 38, 38.9, 39.9, 40.7, 41.5, 42.1, 42.2, 42.4, 7000, 40.2, 40.6, 41.4, 42.2, 43, 44.2, 44.8, 45.8, 46.1, 45.9, 8000, 43.2, 43.8, 44.7, 45.4, 46.5, 47.6, 48, 48.6, 49.1, 49.1, 9000, 46.2, 46.7, 47.5, 48.5, 49.5, 50.3, 51.1, 51.9, 52, 52, 10000, 49, 49.6, 50.6, 51.5, 52.8, 53.5, 54, 54.4, 55, 54.5, 11000, 51.7, 52.2, 53.3, 53.8, 54.6, 55.3, 56, 56.7, 56.7, 57.3, 12000, 54.4, 55.1, 55.7, 56.5, 57.3, 58.5, 58.9, 59.1, 58.5, 58.6, 13000, 57, 57.5, 58.4, 59.2, 59.8, 60.8, 60.9, 61.1, 60.2, 59.8, 14000, 59.4, 59.9, 60.6, 61.7, 62.1, 62.8, 63.2, 62.7, 62.2, 61, 15000, 61.9, 62.3, 63.1, 63.6, 64.3, 64.7, 65.1, 64.1, 63.4, 62.8 },
	AspectDistData = { 15, 10, 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 1000, 0, 4, 4, 3, 10, 11, 12, 12, 12, 12, 2000, 6, 4, 4, 5, 9, 10, 10, 10, 10, 10, 3000, 9, 7, 7, 9, 10, 10, 9, 9, 9, 9, 4000, 13, 10, 9, 10, 10, 10, 10, 9, 9, 9, 5000, 16, 12, 11, 11, 11, 11, 10, 10, 9, 9, 6000, 17, 13, 12, 11, 11, 11, 11, 10, 9, 9, 7000, 19, 14, 12, 12, 11, 11, 10, 10, 9, 9, 8000, 20, 15, 13, 12, 12, 11, 10, 10, 9, 9, 9000, 21, 16, 14, 12, 12, 11, 10, 10, 9, 9, 10000, 21, 16, 14, 13, 12, 11, 10, 10, 9, 8, 11000, 22, 17, 14, 13, 12, 11, 10, 9, 9, 8, 12000, 23, 17, 15, 13, 12, 11, 10, 9, 8, 8, 13000, 23, 18, 15, 13, 12, 11, 10, 9, 8, 7, 14000, 25, 18, 15, 13, 12, 11, 10, 9, 8, 7, 15000, 26, 19, 15, 13, 12, 10, 9, 8, 8, 7 },


}
declare_weapon(JG500B)

--
declare_loadout({
    category         = CAT_BOMBS,
    CLSID            = 'DIS_GBU_16',
    attribute        = JG500.wsTypeOfWeapon,
    Count            = 1,
    Cx_pil           = JG500.Cx,
    Picture          = "gbu24.png", -- TODO
    displayName      = _(jg500_name),
    Weight           = jg500_mass + pylon_mass,
    Elements         = {
        {
            ShapeName = 'kab-500',
            DrawArgs  = { [1] = {1, 1.0}, }
        }
    }, -- TODO
    ejectImpulse     = 140,
    Required  = {"DIS_WMD7"},
})
declare_loadout({
    category         = CAT_BOMBS,
    CLSID            = 'DIS_GBU_10',
    attribute        = JG500B.wsTypeOfWeapon,
    Count            = 1,
    Cx_pil           = JG500B.Cx,
    Picture          = "gbu24.png", -- TODO
    displayName      = _(JG500B_name),
    Weight           = JG500B_mass + pylon_mass,
    Elements         = {
        {
            ShapeName = 'kab-500',
            DrawArgs  = { [1] = {1, 1.0}, }
        }
    }, -- TODO
    ejectImpulse     = 140,
    Required  = {"DIS_WMD7"},
})


